<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>開心天氣</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

    <style>
        :root {
            --text-primary: #FFFFFF;
            --text-secondary: rgba(255, 255, 255, 0.9);
            --bg-overlay-dark: linear-gradient(to bottom, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0.6) 100%);
            --card-bg-dark: rgba(0, 0, 0, 0.35);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: 'Roboto', sans-serif; 
            min-height: 100vh; 
            color: var(--text-primary); 
            overflow-x: hidden; 
            position: relative; 
            background-color: #333; 
            text-shadow: 0 2px 5px rgba(0,0,0,0.5);
        }

        /* === 背景圖片層 (台北101) === */
        .bg-image {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -3;
            background-image: url('https://images.unsplash.com/photo-1609147110688-83b5fd1288e8?q=80&w=1974&auto=format&fit=crop');
            background-size: cover; background-position: center; 
            filter: saturate(1.1) brightness(0.9);
            transition: opacity 0.5s ease;
        }

        /* === SVG 天氣動畫層 === */
        .weather-anim-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2;
            pointer-events: none;
            overflow: hidden;
        }
        .anim-group { opacity: 0; transition: opacity 1s ease; display: none; }
        .anim-group.active { opacity: 1; display: block; }
        @keyframes rotate-slow { 100% { transform: rotate(360deg); } }
        @keyframes rainfall { 0% { transform: translateY(-20px); opacity: 0; } 10% { opacity: 1; } 90% { opacity: 1; } 100% { transform: translateY(110vh); opacity: 0; } }
        @keyframes float-cloud-1 { 0% { transform: translateX(-10%); } 100% { transform: translateX(10%); } }
        @keyframes lightning-flash { 0%, 90%, 100% { opacity: 0; } 92% { opacity: 0.3; } 93% { opacity: 0; } 94% { opacity: 0.5; } 96% { opacity: 0; } }
        @keyframes fog-drift { 0% { transform: translateX(-20%); } 100% { transform: translateX(20%); } }

        .sun-body { fill: rgba(255, 255, 230, 0.15); filter: blur(8px); }
        .sun-rays { animation: rotate-slow 60s linear infinite; stroke: rgba(255, 255, 255, 0.3); stroke-width: 1.5; stroke-dasharray: 5, 5; }
        .rain-drop { fill: rgba(255, 255, 255, 0.6); }
        .rain-fast { animation: rainfall 1s linear infinite; }
        .rain-med { animation: rainfall 1.5s linear infinite; animation-delay: 0.5s; opacity: 0.6; }
        .cloud-shape { fill: rgba(255, 255, 255, 0.2); filter: blur(15px); }
        .cloud-move-1 { animation: float-cloud-1 30s ease-in-out infinite alternate; }
        .lightning-overlay { fill: white; opacity: 0; animation: lightning-flash 8s infinite; }
        .fog-layer { fill: rgba(255, 255, 255, 0.15); filter: blur(30px); animation: fog-drift 20s linear infinite alternate; }

        /* === 遮罩與 UI === */
        .bg-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: var(--bg-overlay-dark); }

        .material-symbols-outlined { vertical-align: middle; }
        .status-bar { display: flex; justify-content: space-between; align-items: center; padding: 20px 24px; position: sticky; top: 0; z-index: 100; }
        .location { font-size: 1.3rem; font-weight: 700; display: flex; align-items: center; gap: 8px; letter-spacing: 1px; }
        .update-time { font-size: 0.85rem; color: var(--text-secondary); }
        .container { padding: 20px 24px 40px; max-width: 600px; margin: 0 auto; position: relative; z-index: 10; }
        
        .hero-section { text-align: center; padding: 40px 0 50px; }
        .hero-temp-group { display: flex; justify-content: center; align-items: center; margin-left: -20px; }
        .hero-icon-large { font-size: 7rem !important; filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3)); }
        .hero-temp { font-size: 6.5rem; font-weight: 300; line-height: 1; text-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .hero-condition { font-size: 1.8rem; font-weight: 500; margin-top: 10px; }
        .hero-details { display: flex; justify-content: center; gap: 15px; margin-top: 15px; color: var(--text-secondary); font-size: 1rem; }
        
        .advice-bar { display: flex; justify-content: space-around; background: var(--card-bg-dark); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); padding: 15px; border-radius: 20px; margin-bottom: 40px; border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .advice-item { display: flex; flex-direction: column; align-items: center; gap: 5px; }
        .advice-item .material-symbols-outlined { font-size: 1.8rem; margin-bottom: 5px; }
        .advice-label { font-size: 0.8rem; color: var(--text-secondary); }
        .advice-value { font-weight: 700; font-size: 1rem; }
        
        /* 標題還原 */
        .section-title { font-size: 1.1rem; color: var(--text-secondary); margin-bottom: 15px; padding-left: 5px; font-weight: 500; text-transform: uppercase; letter-spacing: 1px; }
        .scroll-container { display: flex; overflow-x: auto; gap: 12px; padding-bottom: 20px; scroll-snap-type: x mandatory; scrollbar-width: none; }
        .scroll-container::-webkit-scrollbar { display: none; }
        
        /* 卡片樣式還原為較窄的版本 */
        .forecast-card { min-width: 100px; background: var(--card-bg-dark); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); border-radius: 16px; padding: 20px 15px; text-align: center; flex-shrink: 0; scroll-snap-align: start; border: 1px solid rgba(255, 255, 255, 0.15); display: flex; flex-direction: column; align-items: center; justify-content: space-between; height: 140px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        
        .forecast-time { font-size: 0.9rem; color: var(--text-secondary); }
        .forecast-icon { font-size: 2.5rem !important; margin: 10px 0; }
        .forecast-temp { font-size: 1.1rem; font-weight: 700; }
        .forecast-pop { font-size: 0.75rem; color: #81D4FA; display: flex; align-items: center; gap: 2px; font-weight: bold; }
        .forecast-pop .material-symbols-outlined { font-size: 0.9rem; }
        
        .loading-screen { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #222; display: flex; justify-content: center; align-items: center; z-index: 999; transition: opacity 0.5s ease; }
        .loading-spinner { font-size: 3rem !important; animation: spin 1.5s linear infinite; color: var(--text-secondary); }
        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
</head>

<body>
    <div class="bg-image"></div>

    <svg class="weather-anim-layer" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid slice">
        <g id="anim-sunny" class="anim-group"><g transform="translate(80, 20) scale(1.5)"><circle class="sun-body" cx="0" cy="0" r="12"></circle><g class="sun-rays"><line x1="0" y1="-20" x2="0" y2="-24" /><line x1="14" y1="-14" x2="17" y2="-17" /><line x1="20" y1="0" x2="24" y2="0" /><line x1="14" y1="14" x2="17" y2="17" /><line x1="0" y1="20" x2="0" y2="24" /><line x1="-14" y1="14" x2="-17" y2="17" /><line x1="-20" y1="0" x2="-24" y2="0" /><line x1="-14" y1="-14" x2="-17" y2="-17" /></g></g></g>
        <g id="anim-partly-cloudy" class="anim-group"><g transform="translate(75, 25) scale(1.0)"><circle class="sun-body" cx="0" cy="0" r="10